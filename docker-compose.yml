# docker-compose.yml
#
# ✅ 관리용 명령어 모음
# 1) 실행(백그라운드):          docker compose up -d
# 2) 상태 확인:                docker compose ps
# 3) 로그 보기:                docker compose logs -f
# 4) 특정 서비스만 로그:        docker compose logs -f redis
# 5) 중지(컨테이너 유지):       docker compose stop
# 6) 재시작:                   docker compose restart
# 7) 내리기(컨테이너/네트워크 삭제): docker compose down
# 8) 내리기 + 볼륨까지 삭제(⚠️ 데이터도 삭제): docker compose down -v
#
# ✅ Redis 접속/테스트
# - Redis CLI 접속:            docker exec -it redis-15mintable redis-cli
# - ping 테스트:               docker exec -it redis-15mintable redis-cli ping
#
# ✅ RedisInsight 접속(브라우저)
# - http://localhost:5540
# - Redis 연결 URL(도커 RedisInsight 기준):
#     방법 A) 컨테이너끼리: redis://redis-15mintable:6379
#     방법 B) 호스트 경유: redis://host.docker.internal:6379

services:
  redis:
    image: redis:7
    container_name: redis-15mintable
    ports:
      - "6379:6379"
    restart: unless-stopped
    volumes:
      # ✅ Redis 데이터를 재부팅 후에도 유지하고 싶으면 볼륨 사용
      - redis_data:/data

  redisinsight:
    image: redis/redisinsight:latest
    container_name: redisinsight
    ports:
      - "5540:5540"
    restart: unless-stopped
    depends_on:
      - redis

volumes:
  redis_data:
